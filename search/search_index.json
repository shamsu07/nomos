{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"v1.0 Now Available Rules made simple. <p>     A lightweight, blazing-fast rule engine for Java. Define business rules in     YAML or Java, hot-reload without restarts, and always know why a rule fired.   </p>        Get Started               View on GitHub"},{"location":"#why-nomos","title":"Why nomos?","text":"<p>Traditional rule engines are powerful but often come with a steep learning curve, heavy memory footprints, and a \"black box\" execution model. nomos is different.</p> \u26a1 Blazing Fast <p>       100K+ rule evaluations per second. Pre-compiled expressions and zero reflection in the hot path.     </p> \ud83e\udeb6 Lightweight <p>       Under 100KB JAR size with minimal dependencies. No bloat, just what you need.     </p> \ud83d\udd04 Hot Reload <p>       Update rules at runtime without restarts. Changes take effect in under 50ms.     </p> \ud83d\udd0d Transparent <p>       Built-in execution tracing. Always know exactly which rules fired and why.     </p> \ud83c\udf31 Spring Native <p>       First-class Spring Boot starter with auto-configuration. Zero boilerplate setup.     </p> \ud83d\udcdd Developer First <p>       Define rules in readable YAML or fluent Java DSL. Your choice, your way.     </p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Get up and running in minutes:</p> MavenGradle <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.github.shamsu07&lt;/groupId&gt;\n  &lt;artifactId&gt;nomos-spring-boot-starter&lt;/artifactId&gt;\n  &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <pre><code>implementation(\"io.github.shamsu07:nomos-spring-boot-starter:1.0.0\")\n</code></pre> <p>Define your first rule in YAML:</p> rules/discount.yml<pre><code>rules:\n  - name: \"VIP Discount\"\n    priority: 100\n    when: \"customer.tier == 'VIP' &amp;&amp; cart.total &gt; 100\"\n    then:\n      - discount.percent = 15\n      - discount.reason = \"VIP member discount\"\n</code></pre> <p>Execute rules in your service:</p> CheckoutService.java<pre><code>@Service\npublic class CheckoutService {\n\n    private final ReloadableRuleEngine engine;\n\n    public Order checkout(Customer customer, Cart cart) {\n        Facts facts = new Facts()\n            .put(\"customer\", customer)\n            .put(\"cart\", cart);\n\n        Facts result = engine.execute(facts);\n\n        Double discount = result.get(\"discount.percent\", Double.class);\n        // Apply discount...\n    }\n}\n</code></pre> <p>That's it! Your rules are now live and will hot-reload when you edit the YAML file.</p>"},{"location":"#built-for-production","title":"Built for ProductionReady to simplify your rules?","text":"\ud83d\udee1\ufe0f Thread Safe <p>       Fully concurrent with atomic rule swaps during reload. No locks on execution.     </p> \u2705 Fail Fast <p>       Validate rules at load time, not runtime. Catch errors before they hit production.     </p> \ud83d\udcca Observable <p>       Execution traces, reload events, and metrics for complete visibility.     </p> <p>     Join developers who've replaced complex rule engines with nomos.   </p>      Read the Docs"},{"location":"getting-started/","title":"Getting Started with Spring Boot","text":"<p>This guide will walk you through building a rule-based discount service using <code>nomos</code> and Spring Boot.</p>"},{"location":"getting-started/#1-add-dependencies","title":"1. Add Dependencies","text":"<p>Add the <code>nomos-spring-boot-starter</code> to your project.</p> <p>Gradle: <pre><code>implementation(\"io.github.nomos:nomos-spring-boot-starter:0.0.1-SNAPSHOT\")\n</code></pre></p> <p>Maven: <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.nomos&lt;/groupId&gt;\n    &lt;artifactId&gt;nomos-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></p>"},{"location":"getting-started/#2-configure-properties","title":"2. Configure Properties","text":"<p>In your <code>application.properties</code>, tell <code>nomos</code> where to find your rules and enable hot-reloading.</p> <pre><code># Nomos Configuration\nnomos.rule-location=classpath:rules/discount.yml\nnomos.hot-reload=true\nnomos.stop-on-first-applied-rule=false\n</code></pre>"},{"location":"getting-started/#3-define-your-rules","title":"3. Define Your Rules","text":"<p>Create <code>src/main/resources/rules/discount.yml</code>.</p> <pre><code>rules:\n  - name: \"VIP Discount\"\n    priority: 100\n    when: \"isVIP() &amp;&amp; cartTotal() &gt; 100\"\n    then:\n      - discount.percent = 15\n      - discount.reason = \"VIP Member\"\n      - logDiscount(\"VIP Member\", 15)\n      - sendEmail(user.email, \"You got 15% off as a VIP!\")\n\n  - name: \"Premium Discount\"\n    priority: 90\n    when: \"isPremium() &amp;&amp; cartTotal() &gt; 50\"\n    then:\n      - discount.percent = 10\n      - discount.reason = \"Premium Member\"\n      - logDiscount(\"Premium Member\", 10)\n\n  - name: \"Bulk Order Discount\"\n    priority: 80\n    when: \"itemCount() &gt; 20\"\n    then:\n      - discount.percent = 12\n      - discount.reason = \"Bulk Order\"\n      - logDiscount(\"Bulk Order\", 12)\n      - trackMetric(\"bulk_orders\", 1)\n\n  - name: \"First Time Buyer\"\n    priority: 70\n    when: \"user.orderCount == 0 &amp;&amp; cartTotal() &gt; 30\"\n    then:\n      - discount.percent = 5\n      - discount.reason = \"First Time Buyer\"\n      - logDiscount(\"First Time Buyer\", 5)\n</code></pre>"},{"location":"getting-started/#4-create-rule-functions","title":"4. Create Rule Functions","text":"<p>Create a class for your <code>when</code> clause functions. These are annotated with <code>@NomosFunction</code>.</p> <pre><code>package io.github.shamsu07.nomos.example.rules;\n\nimport io.github.shamsu07.nomos.core.facts.Facts;\nimport io.github.shamsu07.nomos.core.function.NomosFunction;\nimport io.github.shamsu07.nomos.example.model.Cart;\nimport io.github.shamsu07.nomos.example.model.User;\n\npublic class DiscountFunctions {\n\n  @NomosFunction(\"isVIP\")\n  public boolean isVIP(Facts facts) {\n    User user = facts.get(\"user\", User.class);\n    return \"VIP\".equals(user.getType());\n  }\n\n  @NomosFunction(\"isPremium\")\n  public boolean isPremium(Facts facts) {\n    User user = facts.get(\"user\", User.class);\n    return \"PREMIUM\".equals(user.getType());\n  }\n\n  @NomosFunction(\"cartTotal\")\n  public double cartTotal(Facts facts) {\n    Cart cart = facts.get(\"cart\", Cart.class);\n    return cart.getTotal();\n  }\n\n  @NomosFunction(\"itemCount\")\n  public int itemCount(Facts facts) {\n    Cart cart = facts.get(\"cart\", Cart.class);\n    return cart.getItemCount();\n  }\n}\n</code></pre>"},{"location":"getting-started/#5-create-rule-actions","title":"5. Create Rule Actions","text":"<p>Create a class for your <code>then</code> clause actions. These are annotated with <code>@NomosAction</code>.</p> <pre><code>package io.github.shamsu07.nomos.example.rules;\n\nimport io.github.shamsu07.nomos.core.action.NomosAction;\nimport io.github.shamsu07.nomos.core.facts.Facts;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class DiscountActions {\n\n  private static final Logger logger = LoggerFactory.getLogger(DiscountActions.class);\n\n  @NomosAction(\"logDiscount\")\n  public void logDiscount(Facts facts, String reason, double percent) {\n    logger.info(\"Applied {}% discount: {}\", percent, reason);\n  }\n\n  @NomosAction(\"sendEmail\")\n  public void sendEmail(String email, String message) {\n    logger.info(\"Sending email to {}: {}\", email, message);\n  }\n\n  @NomosAction(\"trackMetric\")\n  public void trackMetric(String metric, Object value) {\n    logger.info(\"Metric: {} = {}\", metric, value);\n  }\n}\n</code></pre>"},{"location":"getting-started/#6-register-functions-actions","title":"6. Register Functions &amp; Actions","text":"<p>Register your new classes as Spring beans and wire them into <code>nomos</code> using the <code>NomosConfigurer</code> interface.</p> <pre><code>package io.github.shamsu07.nomos.example.config;\n\nimport io.github.shamsu07.nomos.example.rules.DiscountActions;\nimport io.github.shamsu07.nomos.example.rules.DiscountFunctions;\nimport io.github.shamsu07.nomos.spring.NomosConfigurer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class RuleConfiguration {\n\n  @Bean\n  public NomosConfigurer nomosConfigurer(DiscountFunctions functions, DiscountActions actions) {\n    return (functionRegistry, actionRegistry) -&gt; {\n      functionRegistry.registerFunctionsFrom(functions);\n      actionRegistry.registerActionsFrom(actions);\n    };\n  }\n\n  @Bean\n  public DiscountFunctions discountFunctions() {\n    return new DiscountFunctions();\n  }\n\n  @Bean\n  public DiscountActions discountActions() {\n    return new DiscountActions();\n  }\n}\n</code></pre>"},{"location":"getting-started/#7-execute-the-engine","title":"7. Execute the Engine","text":"<p>Inject the <code>ReloadableRuleEngine</code> into your service and use it.</p> <pre><code>package io.github.shamsu07.nomos.example.service;\n\nimport io.github.shamsu07.nomos.core.facts.Facts;\nimport io.github.shamsu07.nomos.core.reload.ReloadableRuleEngine;\nimport io.github.shamsu07.nomos.example.model.Cart;\nimport io.github.shamsu07.nomos.example.model.User;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class CheckoutService {\n\n  private final ReloadableRuleEngine ruleEngine;\n\n  public CheckoutService(ReloadableRuleEngine ruleEngine) {\n    this.ruleEngine = ruleEngine;\n  }\n\n  public Cart applyDiscounts(User user, Cart cart) {\n    // 1. Create facts\n    Facts facts = new Facts();\n    facts = facts.put(\"user\", user);\n    facts = facts.put(\"cart\", cart);\n\n    // 2. Execute rules\n    Facts result = ruleEngine.execute(facts);\n\n    // 3. Apply changes from facts\n    Double discountPercent = result.get(\"discount.percent\", Double.class);\n    if (discountPercent != null) {\n      cart.setDiscountPercent(discountPercent);\n    }\n\n    return cart;\n  }\n}\n</code></pre>"},{"location":"core-concepts/contributing/","title":"Contributing to Nomos","text":"<p>Thank you for your interest in contributing to Nomos! We welcome contributions from the community.</p>"},{"location":"core-concepts/contributing/#getting-started","title":"Getting Started","text":"<ol> <li>Fork the repository and clone it locally</li> <li>Create a branch for your feature or fix: <code>git checkout -b feat/your-feature-name</code></li> <li>Make your changes following our coding standards</li> <li>Test your changes - ensure all tests pass</li> <li>Submit a Pull Request with a clear description</li> </ol>"},{"location":"core-concepts/contributing/#development-setup","title":"Development Setup","text":""},{"location":"core-concepts/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Java 17 or higher</li> <li>Gradle 8.x (wrapper included)</li> </ul>"},{"location":"core-concepts/contributing/#build-and-test","title":"Build and Test","text":"<pre><code>./gradlew clean build test\n</code></pre>"},{"location":"core-concepts/contributing/#coding-standards","title":"Coding Standards","text":"<p>We follow the Google Java Style Guide.</p>"},{"location":"core-concepts/contributing/#key-rules","title":"Key Rules","text":"<ul> <li>Packages: <code>lowercase</code> (e.g., <code>io.github.username.nomos.engine</code>)</li> <li>Classes: <code>PascalCase</code> (e.g., <code>RuleEngine</code>)</li> <li>Methods/Variables: <code>camelCase</code> (e.g., <code>registerFunction</code>)</li> <li>Constants: <code>UPPER_SNAKE_CASE</code> (e.g., <code>DEFAULT_PRIORITY</code>)</li> <li>Line length: Maximum 120 characters</li> <li>Indentation: 4 spaces (no tabs)</li> </ul>"},{"location":"core-concepts/contributing/#code-formatting","title":"Code Formatting","text":"<p>We use Spotless to enforce consistent formatting. Before committing: <pre><code>./gradlew spotlessApply\n</code></pre></p> <p>This will auto-format your code to match our standards.</p>"},{"location":"core-concepts/contributing/#comments","title":"Comments","text":"<ul> <li>Explain WHY, not WHAT</li> <li>Focus on non-obvious decisions and trade-offs</li> <li>Avoid redundant comments</li> </ul>"},{"location":"core-concepts/contributing/#testing","title":"Testing","text":"<ul> <li>Write tests for all public APIs</li> <li>Test names: <code>should_&lt;expected&gt;_when_&lt;condition&gt;</code></li> <li>Ensure &gt;80% code coverage</li> </ul>"},{"location":"core-concepts/contributing/#commit-messages","title":"Commit Messages","text":"<p>We use Conventional Commits:</p> <ul> <li><code>feat: Add hot reload support</code></li> <li><code>fix: Correct null pointer in expression parser</code></li> <li><code>docs: Update README with examples</code></li> <li><code>style: Apply spotless formatting</code></li> <li><code>refactor: Simplify rule execution logic</code></li> <li><code>test: Add unit tests for function registry</code></li> </ul>"},{"location":"core-concepts/contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Update documentation if you change APIs</li> <li>Add tests for new functionality</li> <li>Ensure CI passes - all builds and tests must succeed</li> <li>Request review from maintainers</li> <li>Address feedback promptly</li> </ol>"},{"location":"core-concepts/contributing/#performance-considerations","title":"Performance Considerations","text":"<p>Nomos prioritizes performance. When contributing: - Avoid reflection in hot paths - Use MethodHandles for dynamic invocation - Pre-size collections when possible - Profile changes that affect core engine</p>"},{"location":"core-concepts/contributing/#questions","title":"Questions?","text":"<p>Open an issue with the <code>question</code> label, and we'll help you get started.</p>"},{"location":"core-concepts/contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>Please read our Code of Conduct before contributing.</p> <p>We appreciate your contributions to making Nomos better!</p>"},{"location":"core-concepts/expressions/","title":"Core Concepts: The Expression Engine","text":"<p>The <code>when</code> clause in a <code>nomos</code> rule is powered by a custom expression parser and evaluator. This engine converts your human-readable rule conditions into executable Java logic.</p>"},{"location":"core-concepts/expressions/#supported-operations","title":"Supported Operations","text":"<p>The expression engine supports standard operator precedence (like in Java) and a wide range of operations.</p>"},{"location":"core-concepts/expressions/#1-literals","title":"1. Literals","text":"<ul> <li>Numbers: <code>100</code>, <code>3.14</code></li> <li>Strings: <code>\"VIP Member\"</code>, <code>'Premium'</code></li> <li>Booleans: <code>true</code>, <code>false</code></li> <li>Null: <code>null</code></li> </ul>"},{"location":"core-concepts/expressions/#2-variables","title":"2. Variables","text":"<ul> <li>Access any key from the <code>Facts</code> object.</li> <li><code>user</code></li> <li><code>cartTotal()</code></li> <li><code>user.address.city</code> (POJO/Map access)</li> </ul>"},{"location":"core-concepts/expressions/#3-logical-operators","title":"3. Logical Operators","text":"<ul> <li><code>&amp;&amp;</code> (AND)</li> <li><code>||</code> (OR)</li> <li><code>!</code> (NOT)</li> </ul>"},{"location":"core-concepts/expressions/#4-comparison-operators","title":"4. Comparison Operators","text":"<ul> <li><code>==</code></li> <li><code>!=</code></li> <li><code>&gt;</code></li> <li><code>&gt;=</code></li> <li><code>&lt;</code></li> <li><code>&lt;=</code></li> </ul>"},{"location":"core-concepts/expressions/#5-arithmetic-operators","title":"5. Arithmetic Operators","text":"<ul> <li><code>+</code> (Addition and String concatenation)</li> <li><code>-</code> (Subtraction and Negation)</li> <li><code>*</code> (Multiplication)</li> <li><code>/</code> (Division)</li> </ul>"},{"location":"core-concepts/expressions/#6-grouping","title":"6. Grouping","text":"<ul> <li><code>(</code> <code>)</code>: Use parentheses to control the order of evaluation.</li> </ul>"},{"location":"core-concepts/expressions/#examples","title":"Examples","text":"Expression Description <code>isVIP() &amp;&amp; cartTotal() &gt; 100</code> Combines function calls and comparisons. <code>user.orderCount == 0</code> Accesses a POJO property. <code>(cartTotal() * 0.1) + 5.0</code> Performs arithmetic. <code>!isPremium() &amp;&amp; user.email != null</code> Uses logical NOT and a null check. <code>user.type == 'VIP' \\|\\| user.type == 'PREMIUM'</code> Checks if a string value is one of two options."},{"location":"core-concepts/facts/","title":"Core Concepts: The Facts Object","text":"<p>The <code>Facts</code> object is the central data container for rule execution. It holds all the input data your rules need to make decisions.</p>"},{"location":"core-concepts/facts/#key-features","title":"Key Features","text":"<ul> <li>Immutable-by-Default: The <code>put()</code> method returns a new <code>Facts</code> instance with the added data. This prevents rules from interfering with each other's state and makes execution predictable.</li> <li>POJO Access: You can put plain Java objects (POJOs) into the facts.</li> <li>Dot-Notation: <code>nomos</code> supports dot-notation (e.g., <code>user.address.city</code>) to access nested properties on maps or POJOs using their getter methods (<code>getAddress().getCity()</code>).</li> <li>Type-Safe Getters: You can retrieve facts with type safety using <code>facts.get(\"key\", String.class)</code>.</li> </ul>"},{"location":"core-concepts/facts/#usage-example","title":"Usage Example","text":"<pre><code>// 1. Create initial facts\nFacts facts = new Facts();\n\n// 2. Add data\n// Note: Each .put() returns a new instance\nfacts = facts.put(\"user\", new User(\"user-123\", \"Test User\", \"test@example.com\", \"VIP\"));\nfacts = facts.put(\"cart\", new Cart(\"cart-123\", 150.0, 25));\nfacts = facts.put(\"discount.percent\", 0.0); // Can set nested properties\n\n// 3. Retrieve data\nString email = facts.get(\"user.email\", String.class); // \"test@example.com\"\nDouble total = facts.get(\"cart.total\", Double.class); // 150.0\nDouble percent = facts.get(\"discount.percent\", Double.class); // 0.0\n</code></pre>"},{"location":"core-concepts/functions-actions/","title":"Core Concepts: Functions vs. Actions","text":"<p><code>nomos</code> makes a critical distinction between Functions (for checking state) and Actions (for changing state).</p>"},{"location":"core-concepts/functions-actions/#functions-nomosfunction","title":"Functions (<code>@NomosFunction</code>)","text":"<p>Functions are used in the <code>when</code> clause of a rule.</p> <ul> <li>Purpose: To evaluate state and return a value (usually <code>boolean</code>, <code>number</code>, or <code>string</code>).</li> <li>Annotation: <code>@NomosFunction(\"nameInYaml\")</code></li> <li>Rule: Should be pure and have no side effects. They should not change facts or call external services that change state (like a database write).</li> <li>Registry: Managed by <code>FunctionRegistry</code>.</li> </ul>"},{"location":"core-concepts/functions-actions/#example","title":"Example","text":"<p>This function checks if a user is a VIP. It is called from the <code>when</code> clause.</p> <pre><code>// DiscountFunctions.java\nimport io.github.shamsu07.nomos.core.facts.Facts;\nimport io.github.shamsu07.nomos.core.function.NomosFunction;\n\npublic class DiscountFunctions {\n\n  @NomosFunction(\"isVIP\")\n  public boolean isVIP(Facts facts) {\n    User user = facts.get(\"user\", User.class);\n    return \"VIP\".equals(user.getType());\n  }\n}\n</code></pre> <pre><code># discount.yml\nrules:\n  - name: \"VIP Discount\"\n    when: \"isVIP() &amp;&amp; cartTotal() &gt; 100\" # &lt;-- Function used here\n    then:\n      - ...\n</code></pre>"},{"location":"core-concepts/functions-actions/#actions-nomosaction","title":"Actions (<code>@NomosAction</code>)","text":"<p>Actions are used in the <code>then</code> clause of a rule.</p> <ul> <li>Purpose: To execute logic, modify facts, or perform side effects (like logging, sending emails, or saving to a database).</li> <li>Annotation: <code>@NomosAction(\"nameInYaml\")</code></li> <li>Rule: Can return <code>void</code> (for side effects) or <code>Facts</code> (if they modify the facts map).</li> <li>Registry: Managed by <code>ActionRegistry</code>.</li> </ul>"},{"location":"core-concepts/functions-actions/#example_1","title":"Example","text":"<p>This action sends an email. It is called from the <code>then</code> clause.</p> <pre><code>// DiscountActions.java\nimport io.github.shamsu07.nomos.core.action.NomosAction;\nimport io.github.shamsu07.nomos.core.facts.Facts;\n\npublic class DiscountActions {\n\n  @NomosAction(\"sendEmail\")\n  public void sendEmail(String email, String message) {\n    // emailService.send(email, message);\n    logger.info(\"Sending email to {}: {}\", email, message);\n  }\n}\n</code></pre> <pre><code># discount.yml\nrules:\n  - name: \"VIP Discount\"\n    when: \"isVIP()\"\n    then:\n      - sendEmail(user.email, \"You got 15% off!\") # &lt;-- Action used here\n</code></pre>"},{"location":"core-concepts/java-rules/","title":"Core Concepts: Rule Definition (Java)","text":"<p>For cases where you need type-safety or complex logic that is difficult to express in a string, you can define rules directly in Java using the <code>Rule.builder()</code>.</p> <p>This is an alternative to using YAML files and is useful for rules defined by developers.</p>"},{"location":"core-concepts/java-rules/#builder-methods","title":"Builder Methods","text":"<ul> <li><code>name(String)</code>: The name of the rule.</li> <li><code>priority(int)</code>: The execution priority (higher executes first).</li> <li><code>when(Predicate&lt;Facts&gt;)</code>: A lambda that receives the <code>Facts</code> and returns <code>true</code> or <code>false</code>.</li> <li><code>then(Rule.Action)</code>: A lambda that receives the <code>Facts</code> and returns the modified <code>Facts</code>.</li> </ul>"},{"location":"core-concepts/java-rules/#example","title":"Example","text":"<p>Here is a rule defined entirely in Java.</p> <pre><code>import io.github.shamsu07.nomos.core.rule.Rule;\nimport io.github.shamsu07.nomos.core.engine.RuleEngine;\nimport io.github.shamsu07.nomos.core.facts.Facts;\n// import your User and Cart models\n\npublic class JavaRuleDefinitions {\n\n    public void registerJavaRules(RuleEngine engine) {\n\n        Rule vipRule = Rule.builder()\n            .name(\"Java VIP Discount\")\n            .priority(100)\n            .when(facts -&gt; {\n                User user = facts.get(\"user\", User.class);\n                Cart cart = facts.get(\"cart\", Cart.class);\n\n                return user != null \n                       &amp;&amp; \"VIP\".equals(user.getType())\n                       &amp;&amp; cart != null\n                       &amp;&amp; cart.getTotal() &gt; 100;\n            })\n            .then(facts -&gt; {\n                // Return a new facts instance with modifications\n                return facts.put(\"discount.percent\", 15.0)\n                            .put(\"discount.reason\", \"Java VIP Rule\");\n            })\n            .build();\n\n        engine.addRule(vipRule);\n    }\n}\n</code></pre>"},{"location":"core-concepts/spring-boot/","title":"Spring Boot Starter","text":"<p>The <code>nomos-spring-boot-starter</code> provides deep integration with Spring Boot, handling auto-configuration, property binding, and bean registration.</p>"},{"location":"core-concepts/spring-boot/#1-auto-configuration","title":"1. Auto-Configuration","text":"<p>By simply including the starter, <code>nomos</code> will: 1.  Create a singleton <code>ReloadableRuleEngine</code> bean and register it in the application context. 2.  Create a <code>FunctionRegistry</code> and <code>ActionRegistry</code> bean. 3.  Read <code>application.properties</code> (or <code>.yml</code>) for <code>nomos.</code> prefixed properties. 4.  Automatically load rules from <code>nomos.rule-location</code>. 5.  Set up the <code>FileWatcher</code> if <code>nomos.hot-reload</code> is true.</p>"},{"location":"core-concepts/spring-boot/#2-configuration-properties","title":"2. Configuration Properties","text":"<p>You can configure the engine in your <code>application.properties</code>.</p> Property Default Description <code>nomos.rule-location</code> <code>classpath:rules/</code> Location of rule files. Supports <code>classpath:</code> and <code>file:</code> prefixes. <code>nomos.hot-reload</code> <code>false</code> If true, watches the <code>rule-location</code> for changes and reloads automatically. <code>nomos.stop-on-first-applied-rule</code> <code>false</code> If true, stops execution after the first rule with a matching condition fires."},{"location":"core-concepts/spring-boot/#3-registering-functions-actions","title":"3. Registering Functions &amp; Actions","text":"<p>The easiest way to register your custom functions and actions is to: 1.  Define your <code>DiscountFunctions</code> and <code>DiscountActions</code> classes (as shown in the Getting Started guide). 2.  Register them as standard Spring <code>@Bean</code>s. 3.  Create a <code>@Bean</code> that implements the <code>NomosConfigurer</code> interface.</p> <p><code>nomos</code> will automatically find this configurer bean and use it to wire your functions and actions into the engine before loading the rules.</p> <pre><code>// src/main/java/io/github/shamsu07/nomos/example/config/RuleConfiguration.java\npackage io.github.shamsu07.nomos.example.config;\n\nimport io.github.shamsu07.nomos.example.rules.DiscountActions;\nimport io.github.shamsu07.nomos.example.rules.DiscountFunctions;\nimport io.github.shamsu07.nomos.spring.NomosConfigurer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class RuleConfiguration {\n\n  // This bean is picked up by NomosAutoConfiguration\n  @Bean\n  public NomosConfigurer nomosConfigurer(DiscountFunctions functions, DiscountActions actions) {\n    return (functionRegistry, actionRegistry) -&gt; {\n      functionRegistry.registerFunctionsFrom(functions);\n      actionRegistry.registerActionsFrom(actions);\n    };\n  }\n\n  // Define your functions and actions as beans\n  @Bean\n  public DiscountFunctions discountFunctions() {\n    return new DiscountFunctions();\n  }\n\n  @Bean\n  public DiscountActions discountActions() {\n    return new DiscountActions();\n  }\n}\n</code></pre>"},{"location":"core-concepts/yaml-rules/","title":"Core Concepts: Rule Definition (YAML)","text":"<p>The YAML file is the simplest way to define and manage your rules. The <code>YAMLRuleLoader</code> parses this file into executable <code>Rule</code> objects.</p>"},{"location":"core-concepts/yaml-rules/#file-structure","title":"File Structure","text":"<p>A rule file must contain a top-level <code>rules</code> key, which is a list of rule definitions.</p> <pre><code>rules:\n  - name: \"Rule 1\"\n    ...\n  - name: \"Rule 2\"\n    ...\n</code></pre>"},{"location":"core-concepts/yaml-rules/#rule-properties","title":"Rule Properties","text":"<p>Each rule in the list has four properties:</p> <ul> <li><code>name</code> (String, Required): A unique name for the rule. Used for logging and tracing.</li> <li><code>priority</code> (Integer, Optional): Controls execution order. Higher numbers execute first. Defaults to <code>0</code>.</li> <li><code>when</code> (String, Required): An expression that must evaluate to <code>true</code> for the rule to fire.</li> <li><code>then</code> (List, Required): A list of actions to execute if the rule fires.</li> </ul>"},{"location":"core-concepts/yaml-rules/#the-then-action-syntax","title":"The <code>then</code> Action Syntax","text":"<p>The <code>then</code> block supports two types of actions:</p>"},{"location":"core-concepts/yaml-rules/#1-assignment","title":"1. Assignment","text":"<p>This modifies the <code>Facts</code> object directly. It uses a simple <code>key = value</code> syntax. The value on the right is evaluated as an expression.</p> <pre><code>then:\n  # Set a simple literal value\n  - discount.percent = 15\n\n  # Set a string value\n  - discount.reason = \"VIP Member\"\n\n  # Set based on an expression\n  - user.loyaltyPoints = user.loyaltyPoints + 10\n</code></pre>"},{"location":"core-concepts/yaml-rules/#2-action-function-call","title":"2. Action Function Call","text":"<p>This calls a registered <code>@NomosAction</code>. It uses standard function call syntax.</p> <pre><code>then:\n  # Call an action with no arguments\n  - logEvent()\n\n  # Call with literal arguments\n  - logDiscount(\"VIP Member\", 15)\n\n  # Call with variables from facts\n  - sendEmail(user.email, \"You got 15% off!\")\n</code></pre>"},{"location":"core-concepts/yaml-rules/#full-example","title":"Full Example","text":"<p>This rule combines all concepts:</p> <pre><code>rules:\n  - name: \"VIP Discount\"\n    priority: 100\n    when: \"isVIP() &amp;&amp; cartTotal() &gt; 100\"\n    then:\n      - discount.percent = 15\n      - discount.reason = \"VIP Member\"\n      - logDiscount(\"VIP Member\", 15)\n      - sendEmail(user.email, \"You got 15% off as a VIP!\")\n</code></pre>"}]}